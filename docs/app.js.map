{"version":3,"sources":["app/initialize.js","app/model.js","app/sketch.js"],"names":["document","addEventListener","require","range","size","Array","keys","width","height","scl","w","h","flying","colOff","rowOff","terrain","cols","rows","model","root","getElementById","Stream","speed","rotation","Math","PI","init","p5","sketch","preload","setup","createCanvas","WEBGL","map","row","col","draw","rotateX","translate","background","noise","beginShape","TRIANGLE_STRIP","vertex","fill","endShape","m","redraw","App","oninit","view","attrs","style","position","top","color","val","id","min","max","step","oninput","e","target","value","for","Number","left","onclick","fontSize","bottom","right","mount"],"mappings":"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","file":"docs/app.js","sourcesContent":["document.addEventListener('DOMContentLoaded', function() {\n    require('sketch');\n});\n","const range = (size) => [...Array(size).keys()]\n\nconst width = 600\nconst height = 600\nconst scl = 20\n\nconst w = 1400\nconst h = 1000\nconst flying = 0\nconst colOff = 0\nconst rowOff = 0\nconst terrain = [[]]\nconst cols = range(width / scl)\nconst rows = range(height / scl)\n\nexport const model = {\n  scl,\n  w,\n  h,\n  flying,\n  colOff,\n  rowOff,\n  terrain,\n  cols,\n  rows\n}\n","const range = (size) => [...Array(size).keys()]\n\nlet root = document.getElementById(\"mithril-dom\")\n\nlet width = 1000\nlet height = 1000\nlet w = Stream(1400)\nlet h = Stream(1000)\nlet scl = Stream(20)\nlet flying = Stream(0)\nlet speed = Stream(-0.2)\nlet colOff = Stream(0)\nlet rowOff = Stream(0)\nlet terrain = Stream([[]])\nlet cols = range(w() / scl())\nlet rows = range(h() / scl())\nlet rotation = Stream(Math.PI / 3)\n\nconst init = () =>\n  new p5((sketch) => {\n    sketch.preload = () => {}\n\n    sketch.setup = () => {\n      sketch.createCanvas(width, height, sketch.WEBGL)\n\n      rows.map((row) => {\n        cols.map((col) => {\n          terrain()[col] = []\n          terrain()[col][row] = 0\n        })\n      })\n    }\n\n    sketch.draw = () => {\n      sketch.rotateX(rotation())\n      sketch.translate(-w() / 2, -h() / 2)\n      sketch.background(\"#81D4FA\")\n\n      flying(flying() + speed())\n\n      rowOff(flying())\n      rows.map((row) => {\n        colOff(0)\n        cols.map((col) => {\n          terrain()[col][row] = sketch.map(\n            sketch.noise(colOff(), rowOff()),\n            0,\n            1,\n            -100,\n            100\n          )\n          colOff(colOff() + 0.21)\n        })\n        rowOff(rowOff() + 0.21)\n      })\n\n      rows.map((row) => {\n        sketch.beginShape(sketch.TRIANGLE_STRIP)\n        cols.map((col) => {\n          sketch.vertex(col * scl(), row * scl(), terrain()[col][row])\n          sketch.vertex(col * scl(), (row + 1) * scl(), terrain()[col][row + 1])\n          if (terrain()[col][row] < -60) {\n            sketch.fill(\"#01579B\")\n          } else if (terrain()[col][row] > -60 && terrain()[col][row] < -50) {\n            sketch.fill(\"#1B5E20\")\n          } else if (terrain()[col][row] > -50 && terrain()[col][row] < -40) {\n            sketch.fill(\"#1B5E20\")\n          } else if (terrain()[col][row] > -40 && terrain()[col][row] < -30) {\n            sketch.fill(\"#2E7D32\")\n          } else if (terrain()[col][row] > -30 && terrain()[col][row] < -20) {\n            sketch.fill(\"#388E3C\")\n          } else if (terrain()[col][row] > -20 && terrain()[col][row] < -10) {\n            sketch.fill(\"#43A047\")\n          } else if (terrain()[col][row] > -10 && terrain()[col][row] < -0) {\n            sketch.fill(\"#4CAF50\")\n          } else if (terrain()[col][row] > -0 && terrain()[col][row] < 10) {\n            sketch.fill(\"#66BB6A\")\n          } else if (terrain()[col][row] > 10 && terrain()[col][row] < 20) {\n            sketch.fill(\"#81C784\")\n          } else if (terrain()[col][row] > 20 && terrain()[col][row] < 30) {\n            sketch.fill(\"#2ecc71\")\n          } else if (terrain()[col][row] > 30 && terrain()[col][row] < 40) {\n            sketch.fill(\"#A5D6A7\")\n          } else if (terrain()[col][row] > 40 && terrain()[col][row] < 50) {\n            sketch.fill(\"#C8E6C9\")\n          } else if (terrain()[col][row] > 50 && terrain()[col][row] < 100) {\n            sketch.fill(\"#ecf0f1\")\n          }\n        })\n        sketch.endShape()\n        m.redraw()\n      })\n    }\n  })\n\nconst App = () => {\n  return {\n    oninit: init(),\n    view: ({ attrs: { w, speed, scl, rotation } }) => {\n      return m(\".mithril\", [\n        m(\n          \".form-group\",\n          { style: { position: \"absolute\", top: \"10px\", color: \"white\" } },\n          [\n            m(\"input[type=range]\", {\n              val: scl(),\n              id: \"scale\",\n              min: 0,\n              max: 30,\n              step: 0.1,\n              oninput: (e) => scl(e.target.value)\n            }),\n            m(\"label\", { for: \"scale\" }, `scale: ${scl()}`)\n          ]\n        ),\n\n        m(\n          \".form-group\",\n          { style: { position: \"absolute\", top: \"30px\", color: \"white\" } },\n          [\n            m(\"input[type=range]\", {\n              val: speed(),\n              id: \"speed\",\n              min: -1,\n              max: 1,\n              step: 0.1,\n              oninput: (e) => speed(Number(e.target.value))\n            }),\n            m(\"label\", { for: \"speed\" }, `speed: ${speed()}`)\n          ]\n        ),\n\n        m(\n          \".form-group\",\n          {\n            style: {\n              position: \"absolute\",\n              top: \"10px\",\n              left: \"50%\",\n              color: \"white\"\n            }\n          },\n\n          [\n            m(\n              \"button\",\n              {\n                onclick: () => rotation(rotation() + 0.1),\n                id: \"rotateXUp\",\n                style: {\n                  fontSize: \"50px\"\n                }\n              },\n              \"Up\"\n            )\n          ]\n        ),\n\n        m(\n          \".form-group\",\n          {\n            style: {\n              position: \"absolute\",\n              bottom: \"10px\",\n              left: \"50%\",\n              color: \"white\"\n            }\n          },\n\n          [\n            m(\n              \"button\",\n              {\n                onclick: () => rotation(rotation() - 0.1),\n                id: \"rotateXDown\",\n                style: {\n                  fontSize: \"50px\"\n                }\n              },\n              \"Down\"\n            )\n          ]\n        ),\n\n        m(\n          \".form-group\",\n          {\n            style: {\n              position: \"absolute\",\n              left: \"10px\",\n              color: \"white\"\n            }\n          },\n\n          [\n            m(\n              \"button\",\n              {\n                onclick: () => w(w() - 100),\n                id: \"pan-left\",\n                style: {\n                  fontSize: \"50px\"\n                }\n              },\n              \"Left\"\n            )\n          ]\n        ),\n\n        m(\n          \".form-group\",\n          {\n            style: {\n              position: \"absolute\",\n              right: \"10px\",\n              color: \"white\"\n            }\n          },\n\n          [\n            m(\n              \"button\",\n              {\n                onclick: () => w(w() + 100),\n                id: \"pan-right\",\n                style: {\n                  fontSize: \"50px\"\n                }\n              },\n              \"Right\"\n            )\n          ]\n        )\n      ])\n    }\n  }\n}\n\nm.mount(root, { view: () => m(App, { w, h, scl, rotation, speed }) })\n"]}